
module
{
    interface Elastos.Droid.Content.IContext;
    interface Elastos.Droid.Os.IPersistableBundle;

    namespace Elastos {
    namespace Droid {
    namespace Service {
    namespace Restrictions {

    /**
     * Abstract implementation of a Restrictions Provider BroadcastReceiver. To implement a
     * Restrictions Provider, extend from this class and implement the abstract methods.
     * Export this receiver in the manifest. A profile owner device admin can then register this
     * component as a Restrictions Provider using
     * {@link DevicePolicyManager#setRestrictionsProvider(ComponentName, ComponentName)}.
     * <p>
     * The function of a Restrictions Provider is to transport permission requests from apps on this
     * device to an administrator (most likely on a remote device or computer) and deliver back
     * responses. The response should be sent back to the app via
     * {@link RestrictionsManager#notifyPermissionResponse(String, PersistableBundle)}.
     *
     * @see RestrictionsManager
     *
     * @Involve
     * interface IBroadcastReceiver
     */
    interface IRestrictionsReceiver {
        /**
         * An asynchronous permission request made by an application for an operation that requires
         * authorization by a local or remote administrator other than the user. The Restrictions
         * Provider should transfer the request to the administrator and deliver back a response, when
         * available. The calling application is aware that the response could take an indefinite
         * amount of time.
         * <p>
         * If the request bundle contains the key {@link RestrictionsManager#REQUEST_KEY_NEW_REQUEST},
         * then a new request must be sent. Otherwise the provider can look up any previous response
         * to the same requestId and return the cached response.
         *
         * @param packageName the application requesting permission.
         * @param requestType the type of request, which determines the content and presentation of
         * the request data.
         * @param request the request data bundle containing at a minimum a request id.
         *
         * @see RestrictionsManager#REQUEST_TYPE_APPROVAL
         * @see RestrictionsManager#REQUEST_TYPE_LOCAL_APPROVAL
         * @see RestrictionsManager#REQUEST_KEY_ID
         */
        OnRequestPermission(
            [in] IContext* ctx,
            [in] String packageName,
            [in] String requestType,
            [in] String requestId,
            [in] IPersistableBundle* request);
    }

    } // namespace Restrictions
    } // namespace Service
    } // namepsace Droid
    } // namespace Elastos
}
